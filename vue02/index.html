<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vue.js ì• ì™„ìš©í’ˆìƒµ</title>
  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <link rel="stylesheet" type="text/css" href="assets/css/app.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

  <!-- bootstrap CDN -->
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap-theme.min.css"
    integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"
    integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script>
</head>

<body>
<!-- <script>
  //json íŒŒì¼ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ê³  console ì¶œë ¥
  fetch('./products.json') // ì„œë²„ìª½ìœ¼ë¡œ í†µì‹ í•˜ëŠ” url
  .then(reponse => {return reponse.json();}) //thenì„ ì´ìš©í•˜ì—¬ 1ì°¨ì ìœ¼ë¡œ jsonì„ íŒŒì‹±
  .then(data =>{ // ë‘ë²ˆì§¸ë¶€í„° ì²˜ë¦¬.
    console.log(data);
  }).catch(err => console.log(err));

  $.ajax({
      url: 'products.json',
      dataType: 'json',
      success: function (data) {
        console.log(data);
      },
      error: function (reject) {
        console.log(reject);
      }
    })
</script> -->


  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var webstore = new Vue({
        el: '#app',
        data: {
          sitename: 'Vues.js ì• ì™„ìš©í’ˆìƒµ',
        //  product: [],
          products: [],
          // product: {
          //   id: 1001,
          //   title: 'ì‚¬ì ì‚¬ë£Œ, 25íŒŒìš´ë“œ',
          //   description: 'ë‹¹ì‹ ì˜ ì‚¬ìë¥¼ ìœ„í•œ <em>ê±°ë¶€í•  ìˆ˜ ì—†ëŠ”</em>,' +
          //     'ìœ ê¸°ë† 25íŒŒìš´ë“œ ì‚¬ë£Œì…ë‹ˆë‹¤.',
          //   price: 2000,
          //   image: 'assets/images/product-fullsize.png',
          //   stock: 20, // ì¬ê³ 
          //   rating : 3
          // },
          cart: [], // ì¹´íŠ¸ ì•„ì´í…œì„ ë‹´ì€ ë°°ì—´ì„ í‘œì‹œ
          showProduct: true,
          order : {
            firstName : '',
            lastName : '',
            address : '',
            city : '',
            zip : '',
            state : '',
            method : 'ìíƒì£¼ì†Œ',
            business : 'ì§ì¥ì£¼ì†Œ',
            home : 'ìíƒì£¼ì†Œ',
            gift : 'ì„ ë¬¼ë¡œ ë³´ë‚´ê¸°',
            sendGift : 'ì„ ë¬¼ë¡œ ë³´ë‚´ê¸°',
            dontSendGift : 'ì„ ë¬¼ë¡œ ë³´ë‚´ì§€ ì•Šê¸°'
          },
          state : {
            AL : 'ì•Œë¼ë°”ë§ˆ',
            AK : 'ì•Œë˜ìŠ¤ì¹´',
            AR : 'ì• ë¦¬ì¡°ë‚˜',
            CA : 'ìº˜ë¦¬í¬ë‹ˆì•„',
            NV : 'ë„¤ë°”ë‹¤'
          }
        },
        methods: {
          addToCart: function (product) {
            this.cart.push(product.id);
          },
          showCheckout: function () { //í† ê¸€ .. ê»ë‹¤ì¼°ë‹¤ ê°€ëŠ¥
            this.showProduct = this.showProduct ? false : true;
          },
          submitForm : function() {
            alert('êµ¬ë§¤ì™„ë£Œ');
          },
          checkRating : function(n, product) {
            return (product.rating - n) >= 0;
          },
          canAddToCart: function(product) {
            return this.cartCount(product.id) < product.stock; //í˜„ì¬ ì¥ë°”êµ¬ë‹ˆ ì•ˆì— ë“¤ì–´ê°€ìˆëŠ” ..
          },
          cartCount : function(productId){
            let count = 0;
            for(let i=0; i < this.cart.length; i++){
              if(this.cart[i] == productId){
                count++;
              }
            }
            return count;
          }
        },
        computed: {
          cartItemCount: function () {
            return this.cart.length;
          }
        },
        filters: { // í•„í„°ëŠ” ë‹¨ë…ìœ¼ë¡œ ì‚¬ìš©ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.
          formatPrice: function (price) { // ì´ë¦„ì€ í•„ë“œì²˜ëŸ¼ ì“°ê³  ë‚´ìš©ì€ í‘ì…˜ìœ¼ë¡œ ì •ë¦¬
            if (!parseInt(price)) { return ''; } // í•„í„°ëŠ” thisë¡œ ì§ì ‘ ì—°ê²°í•˜ì§€ ì•ŠëŠ”ë‹¤.
            if (price > 99999) {
              // $1,000ì´ìƒì˜ ê°’
              var priceString = (price / 100).toFixed(2) //toFixedëŠ” ì†Œìˆ˜ì  ë’·ìë¦¬ë¥¼ ì œí•œí•œë‹¤
              var priceArray = priceString.split('').reverse();
              var index = 3;
              while (priceArray.length > index + 3) {
                priceArray.splice(index + 3, 0, ',');
                index += 4;
              }
              return '$' + priceArray.reverse().join('');
            } else {
              return '$' + (price / 100).toFixed(2);
            }
          }
        },
        created : function(){
        //json íŒŒì¼ì—ì„œ ë°ì´í„°ë¥¼ ì½ì–´ì˜¤ê³  console ì¶œë ¥
       fetch('./products.json') // ì„œë²„ìª½ìœ¼ë¡œ í†µì‹ í•˜ëŠ” url
        .then(reponse => {return reponse.json();}) //thenì„ ì´ìš©í•˜ì—¬ 1ì°¨ì ìœ¼ë¡œ jsonì„ íŒŒì‹±
        .then(data =>{ // ë‘ë²ˆì§¸ë¶€í„° ì²˜ë¦¬.
         this.products = data.products;
        }).catch(err => console.log(err));
        }
      })
    });
  </script>
  <div id="app" class="container">
    <header>
      <div class="navbar navbar-default">
        <div class="navbar-header">
          <h1>{{ sitename }}</h1>
        </div>
        <div class="nav navbar-nav navbar-right cart">
          <button type="button" class="btn btn-default btn-lg" v-on:click="showCheckout()">
            <span class="glypicon glypicon-shopping-cart">{{ cartItemCount }}</span>
            <span>ğŸ›´ì²´í¬ì•„ì›ƒ</span>
          </button>
        </div>
      </div>
    </header>
    <main>
      <div v-if="showProduct">
        <div class="row product" v-for="product in products">
          <div class="col-md-4">
            <!--ìƒí’ˆ ì´ë¯¸ì§€ ì¶œë ¥-->
            <figure>
              <img :src="product.image" width="200px"> <!-- ì‚¬ì§„ ì¡°ì ˆ ì•ˆí•˜ë©´ ì‚¬ì§„ í¬ê²Œ ë‚˜ì˜´-->
            </figure>
          </div>
          <div class="col col-expand">
            <!--ìƒí’ˆê´€ë ¨ ì •ë³´ ì¶œë ¥-->
            <h1 v-text="product.title"></h1>
            <p v-html="product.description"></p>
            <!--v-textë‘ htmlì´ë‘ í˜¼ë™í•˜ê¸° ì‰¬ìš´ë° htmlì€ píƒœê·¸ ì•ˆì— ìˆëŠ” í•˜ìœ„íƒœê·¸ë¥¼ ê±´ë“¬ íƒœê·¸ê°€ ì—†ìœ¼ë©´ textë¡œ ì²˜ë¦¬í•´ë„ ë¨-->
            <p class="price">{{ product.price | formatPrice }}</p>
          </div>
          <!--disabledë¥¼ ì‚¬ìš©í•˜ì—¬ íŠ¹ì •ì¡°ê±´ì´ ë§Œì¡±í•˜ë©´ ë²„íŠ¼ì„ ë¹„í™œì„±í™”í•˜ê²Œ ë§Œë“¬.(cssë¥¼ ì—†ì•°)-->
          <button v-on:click="addToCart(product)" class="btn btn-primary btn-lg" :disabled="!canAddToCart(product)">ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°</button>
          <!-- ì£¼ì˜ ! ifë””ë ‰í‹°ë¸ŒëŠ” ë‚˜ëˆ ì§€ë©´ ì—°ë™ì´ ì•ˆë˜ê¸°ì— ì¤‘ê°„ì— if ~ else-if ~ else ë¶™ì—¬ì„œ ì“¸ê²ƒ -->
          <span class="inventory-message" v-if="(product.stock - cartCount(product.id)) == 0"> í’ˆì ˆ !</span>
          <span class="inventory-message" v-else-if="(product.stock - cartCount(product.id)) > 5">{{ product.stock - cartCount(product.id) }} <!--íŠ¹ì • í•˜ë‚˜ë§Œ ë³´ì—¬ì£¼ëŠ”ê²Œ ì•„ë‹ˆë¼ ìƒˆë¡œ cartCountë¡œ ìˆ˜ì •í•¨-->
            ë‚¨ì•˜ìŠµë‹ˆë‹¤!!</span>
          <span class="inventory-message" v-else> ì§€ê¸ˆ êµ¬ë§¤í•˜ì„¸ìš” !</span>
          <div class="rating">
            <!-- <span v-for="n in 5">â˜…</span> ì„ì‹œë³€ìˆ˜ â˜…ì™€ íšŸìˆ˜ 5ë¥¼ ì •í•˜ì—¬ â˜…ì´ 5ê°œ ë‚˜ì˜¨ë‹¤ indexë¼ëŠ” ê°œë…ì€ 0ë¶€í„° ì‹œì‘í•˜ì§€ë§Œ ê·¸ ì™¸ì˜ ê°’ì€ 1ë¶€í„° ì‹œì‘í•œë‹¤.-->
            <span v-for="n in 5" :class="{'rating-active' : checkRating(n, product)}">â˜†</span>
            <!--ì„ì‹œë³€ìˆ˜ â˜…ì™€ íšŸìˆ˜ 5ë¥¼ ì •í•˜ì—¬ â˜…ì´ 5ê°œ ë‚˜ì˜¨ë‹¤ indexë¼ëŠ” ê°œë…ì€ 0ë¶€í„° ì‹œì‘í•˜ì§€ë§Œ ê·¸ ì™¸ì˜ ê°’ì€ 1ë¶€í„° ì‹œì‘í•œë‹¤.-->
            <!--rating-activeì— ''ê°€ ìˆëŠ” ì´ìœ ëŠ” ì›ë˜ëŠ” -ë¥¼ ëª»ì“°ëŠ”ë° ''ë¡œ ë¬¶ì–´ì„œ í•œ ë‹¨ì–´ë¡œ ë§Œë“ ê²ƒ.-->
            <!--{'rating-active' : true }ë¼ë©´ ë¹ˆ ë³„ë¡œ ì§€ì •í•´ë’€ì§€ë§Œ ê²€ì€ë³„ë¡œ ë‚˜ì˜´.-->
          </div>
        </div><!-- end v-for -->
      </div><!--end v-if-->

      <div v-else class="row">
        <div class="col-md-10 col-md-offset1">
          <div class="panel panel-info">
            <div class="panel-heading">ì• ì™„ìš©í’ˆ ì²´í¬ì•„ì›ƒ</div>
            <div class="panel-body">

              <div class="form-group">
                <div class="col-md-12">
                  <h4><strong>ì •ë³´ë¥¼ ì…ë ¥í•˜ì„¸ìš”</strong></h4>
                </div>
              </div>
              <div class="form-group">
                <div class="col-md-6">
                  <strong>ì´ë¦„: </strong>
                  <input class="form-control" v-model.trim="order.firstName">
                </div>
                <div class="col-md-6">
                  <strong>ì„±: </strong>
                  <input class="form-control" v-model.trim="order.lasttName">
                </div>
              </div>


              <div class="form-grop">
                <div class="col-md-12">
                  <strong>ì£¼ì†Œ:</strong>
                </div>
                <div class="col-md-12">
                  <input class="form-control" v-model.trim="order.address">
                </div>
              </div>

             <div class="form-group">
                <div class="col-md-12">
                  <strong>ë„ì‹œ</strong>
                </div>
                <div class="col-md-12">
                  <input class="form-control" v-model.trim="order.city">
                </div>
             </div>

              <div class="form-group">
                <div class="col-md-2">
                  <strong>ì£¼ì†Œ:</strong>
                  <select class="form-control" v-model="order.state">
                    <option disabled value="">ì£¼</option>
                    <option v-for="(state, key) in state" :value="state">{{ key }}</option> <!--ë°”ì¸ë“œë¥¼ í•˜ëŠ”ë° ë°¸ë¥˜ì†ì„±ì„-->
                  </select>
                </div>

              </div>
              <div class="form-group">
                <div class="col-md-6 col-md-offset-4">
                  <strong>ìš°í¸ë²ˆí˜¸:</strong>
                  <input class="form-control" type="number" v-model.number="order.zip"> <!--.number ìˆ˜ì‹ì–´ëŠ” v-model ì§€ì‹œì ê°’ì„ ìˆ«ìë¡œ ìë™ íƒ€ì…ë³€í™˜í• ë•Œ ì“´ë‹¤.-->
                </div>
              </div>

              <div class="form-group">
                <div class="col-md-6 boxes">
                  <input type="checkbox" id="gift" value="true" :true-value="order.sendGift" :false-value="order.dontSendGift" v-model="order.gift">
                  <!--ì²´í¬ë°•ìŠ¤ëŠ” trueì™€ falseê°’ì„ ê°€ì§€ê¸°ì— ì´ëŸ°ì‹ìœ¼ë¡œ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤.-->
                  <label for="gift">ì„ ë¬¼ë³´ë‚´ê¸°?</label>
                </div>
              </div>

              <div class="form-group">
                <div class="col-md-6 boxes">
                  <input type="radio" id="home" v-model="order.method" :value="order.home">
                  <label for="home">ìíƒ</label>
                  <input type="radio" id="business" v-model="order.method" :value="order.business">
                  <label for="business">ì§ì¥</label>
                </div>
              </div>

              <div class="form-group">
                <div class="col-md-6 "></div>
                <button type="submit" class="btn btn-primary submit" @click="submitForm()">ì£¼ë¬¸í•˜ê¸°</button>
              </div>
              <div class="col-md-12 verify">
                <pre>
                  ì´ë¦„ : {{ order.firstName }}
                  ì„± : {{ order.lasttName }}
                  ì£¼ì†Œ : {{ order.address }}
                  ë„ì‹œ : {{ order.city }}
                  ìš°í¸ë²ˆí˜¸ : {{ order.zip }}
                  ì£¼ : {{ order.state }}
                  ë°°ì†¡ì§€ : {{ order.method }}
                  ì„ ë¬¼ : {{ order.gift }}
                </pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</body>

</html>